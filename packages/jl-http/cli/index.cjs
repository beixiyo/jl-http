#!/usr/bin/env node
"use strict";var e=require("node:fs"),t=require("node:path");function n(n,r,o){var s;s=r,e.existsSync(s)||e.mkdirSync(s,{recursive:!0}),e.writeFileSync(t.resolve(process.cwd(),`${r}/${o}`),n,"utf-8")}"function"==typeof SuppressedError&&SuppressedError;const r=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),o={string:"string",number:"number",boolean:"boolean",true:"true",false:"false",array:"any[]",object:"object",any:"any",null:"null",undefined:"undefined",function:"Function",Function:"Function",bigInt:"bigInt"};function s(e){const t=o[e];if(t)return t;if("string"==typeof e){const t=e.match(/.+?\[\]/g);if(null==t?void 0:t[0])return t[0]}const n=r(e);return"array"===n?"any[]":n}const c="node_modules/@jl-org/.http",u="temp.cjs",i=t.resolve(process.cwd(),`${c}/${u}`);!function(){const{input:r,output:o}=function(){const[e,n,r,o]=process.argv;return{input:t.resolve(process.cwd(),r||""),output:t.resolve(process.cwd(),o||"")}}();n((a=r,e.readFileSync(a,"utf-8").replace(/import\s*\{\s*(.*?)\s*\}\s*from\s*['"](.*?)['"]/g,((e,t,n)=>`const { ${t} } = require('${n}')`)).replace(/export default/g,"module.exports =")),c,u);var a;const l=function(e){let t="";const{importPath:n="",requestFnName:r,className:o}=e;return t+=n,c(),c(),t+=`export class ${o} {`,c(),i(),c(),t+="}",t;function c(){t+="\n"}function u(){t+="    "}function i(){var n;null===(n=e.fns)||void 0===n||n.forEach((e=>{if(Object.keys(e).length<=0)return;c(),u();const n=function(e){if(!e)return"";let t="{";for(const n in e)Object.hasOwnProperty.call(e,n)&&(t+=`\n\t\t${n}: ${s(e[n])}`);return t+="\n\t}",t}(e.args);t+=e.comment?`/** ${e.comment} */\n\t`:"",t+=`static ${e.isAsync?"async ":""}${e.name}(${n?`data: ${n}`:""}) {`,c(),u(),u(),["get","head"].includes(e.method)?t+=`return ${r}.${e.method}('${e.url}'${n?", { query: data }":""})`:t+=`return ${r}.${e.method}('${e.url}'${n?", data":""})`,c(),u(),t+="}",c()}))}}(require(i));e.writeFileSync(o,l,"utf-8"),e.rm(i,(()=>{}))}();
