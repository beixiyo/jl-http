#!/usr/bin/env node
"use strict";var e=require("node:fs"),t=require("node:path");const n=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),r={string:"string",number:"number",boolean:"boolean",true:"true",false:"false",array:"any[]",object:"object",any:"any",null:"null",undefined:"undefined",function:"Function",Function:"Function",bigInt:"bigInt"};function o(e){const t=r[e];if(t)return t;if("string"==typeof e){let t=e.match(/.+?\[\]/g);if(t?.[0])return t[0]}return n(e)}function s(n,r,o){var s;s=r,e.existsSync(s)||e.mkdirSync(s,{recursive:!0}),e.writeFileSync(t.resolve(process.cwd(),`${r}/${o}`),n,"utf-8")}const c="node_modules/@jl-org/.http",u="temp.cjs",i=t.resolve(process.cwd(),c+"/"+u);!function(){const{input:n,output:r}=function(){const[e,n,r,o]=process.argv;return{input:t.resolve(process.cwd(),r||""),output:t.resolve(process.cwd(),o||"")}}();s((a=n,e.readFileSync(a,"utf-8").replace(/import\s*\{\s*(.*?)\s*\}\s*from\s*['"](.*?)['"]/g,((e,t,n)=>`const { ${t} } = require('${n}')`)).replace(/export default/g,"module.exports =")),c,u);var a;const l=function(e){let t="";const{importPath:n="",requestFnName:r,className:s}=e;return t+=n,c(),c(),t+=`export class ${s} {`,c(),i(),c(),t+="}",t;function c(){t+="\n"}function u(){t+="    "}function i(){e.fns?.forEach((e=>{if(Object.keys(e).length<=0)return;c(),u();const n=function(e){if(!e)return"";let t="{";for(const n in e)Object.hasOwnProperty.call(e,n)&&(t+=`\n\t\t${n}: ${o(e[n])}`);return t+="\n\t}",t}(e.args);t+=`static ${e.isAsync?"async ":""}${e.name}(${n?`data: ${n}`:""}) {`,c(),u(),u(),["get","head"].includes(e.method)?t+=`return ${r}.${e.method}('${e.url}'${n?", { query: data }":""})`:t+=`return ${r}.${e.method}('${e.url}'${n?", data":""})`,c(),u(),t+="}",c()}))}}(require(i));e.writeFileSync(r,l,"utf-8"),e.rm(i,(()=>{}))}();
